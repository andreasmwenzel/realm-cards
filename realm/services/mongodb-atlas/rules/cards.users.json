{
  "database": "cards",
  "collection": "users",
  "relationships": {
    "currentTable": {
      "ref": "#/relationship/mongodb-atlas/cards/active0tables",
      "source_key": "currentTable",
      "foreign_key": "_id",
      "is_list": true
    }
  },
  "roles": [
    {
      "name": "isUser",
      "apply_when": {
        "_id": "%%user.id"
      },
      "fields": {
        "username": {
          "write": true
        }
      },
      "read": true,
      "insert": false,
      "delete": false,
      "additional_fields": {}
    },
    {
      "name": "default",
      "apply_when": {},
      "fields": {
        "username": {
          "read": true
        },
        "email": {
          "read": true
        }
      },
      "insert": false,
      "delete": false,
      "additional_fields": {}
    }
  ],
  "schema": {
    "title": "user",
    "required": ["_id", "email", "username"],
    "properties": {
      "_id": {
        "bsonType": "objectId"
      },
      "email": {
        "bsonType": "string"
      },
      "username": {
        "bsonType": "string"
      },
      "currentTable": {
        "bsonType": "objectId",
        "description": "Table the current user is currently assigned to"
      },
      "hand": {
        "bsonType": "array",
        "items": {
          "bsonType": "string"
        }
      }
    }
  }
}
